---
title: 'Was brauche ich um zu starten?'
description: 'So k√∂nnte ein Basic Setup aussehen, wenn du dich entscheidest in der Cloud zu hos'
date: 2024-12-16
tags: ['linux', 'server']
image: './server.png'
authors: ['tobias']
---
import Callout from '@/components/Callout.astro'

# 1. Intro

W√§re es nicht ziemlich cool, praktische Dienste wie Google Photos, Dropbox oder einen VPN selbst zu hosten?
M√∂chtest du die volle Kontrolle √ºber deine Daten behalten?

Ich habe vor einigen Jahren den gro√üen Cloud-Anbietern den R√ºcken gekehrt und k√ºmmere mich seitdem selbst um die Bereitstellung solcher Dienste. Es geht mir dabei vor allem um Datenhoheit ‚Äì meine Daten sind meine Daten, und ich m√∂chte keine Dienste mit meinen Informationen ‚Äûbezahlen‚Äú.

Google und Co. bieten zwar kostenlose Services an, aber diese sind nicht wirklich umsonst ‚Äì du zahlst mit deinen (Meta-)Daten. Auf diese Art der ‚ÄûBezahlung‚Äú m√∂chte ich verzichten. Stattdessen nehme ich die Bereitstellung der notwendigen Infrastruktur selbst in die Hand.

Es gibt viele Open-Source-Projekte, die kommerzielle Dienste nicht nur 1:1 ersetzen, sondern oft sogar √ºbertreffen k√∂nnen. In diesem Artikel m√∂chte ich euch eine Grundlage bieten, um mit Selfhosting zu starten.

---

# 2. Die Hardware

Um mit Selfhosting zu beginnen, braucht man nicht viel. Der Einstieg erfordert zun√§chst einen PC oder Laptop. Notfalls k√∂nnte man sogar ein Tablet oder Smartphone nutzen, aber diese Optionen klammere ich hier aus.

Dieser PC oder Laptop wird sp√§ter zur Steuerzentrale f√ºr deinen Server, denn der Server selbst wird headless betrieben.

<Callout icon="üí°" type="info">
<strong>Was bedeutet headless?<br></br></strong>
Ein headless Server l√§uft ohne angeschlossenen Bildschirm, Maus oder Tastatur. Er wird in der Regel per Fernzugriff √ºber ein Netzwerk gesteuert.
</Callout>

Ob dein Betriebssystem Linux, macOS oder Windows ist, spielt am Anfang keine gro√üe Rolle. Pers√∂nlich empfehle ich dir aber, Linux als Hauptbetriebssystem zu nutzen ‚Äì es ist zuverl√§ssig, flexibel und perfekt f√ºr Selfhosting.
Server zu Hause oder in der Cloud?

Jetzt stellt sich die Frage: M√∂chtest du deinen Server zu Hause oder in der Cloud betreiben?

    **Zu Hause:**

    Hier bietet sich ein Raspberry Pi oder ein kleiner Mini-PC an. Besonders Mini-PCs sind eine g√ºnstige L√∂sung. Viele Unternehmen verkaufen Leasing-R√ºckl√§ufer als refurbished Ger√§te, die sich hervorragend f√ºr den Einstieg eignen.

    **In der Cloud:**

    Falls du keinen Platz zu Hause hast oder dich nicht selbst um die Hardware k√ºmmern m√∂chtest, kannst du f√ºr etwa 5 ‚Ç¨ im Monat einen kleinen Server in der Cloud mieten.
    Ich pers√∂nlich habe gute Erfahrungen mit Hetzner und Netcup gemacht ‚Äì das ist keine Werbung, sondern nur meine Empfehlung basierend auf eigener Nutzung.

---

# 3. Software

Wenn die Hardwarefrage gekl√§rt ist, geht es weiter mit der Software.

Hier mache ich es kurz: 

Ich nutze seit Jahren den Ubuntu Server und bin damit √§u√üerst zufrieden. Daher empfehle ich euch, damit ebenfalls zu starten.

[Ubuntu Server iso](https://ubuntu.com/download/server)

---

# 4. Server Setup

F√ºr den Anfang erkl√§re ich die Cloud-Variante mit Hetzner, da sie einfacher und mit weniger Aufwand verbunden ist. Ein separater Artikel √ºber das Einrichten eines Servers zu Hause im Homelab folgt sp√§ter.

Die Cloud-Option eignet sich ideal zum Testen: Du kannst einen Server aufsetzen, verschiedene Dienste ausprobieren und ihn bei Bedarf einfach wieder k√ºndigen. So besteht kein finanzielles Risiko ‚Äì der Einstieg kostet lediglich etwa 5 ‚Ç¨ pro Monat.

---

## 4.1 Server aufsetzen

    Account erstellen:

    Registriere dich bei Hetzner und logge dich unter [Hetzner](https://www.hetzner.com/cloud/) ein.

    **Cloud-Server anlegen:**
    * W√§hle eine Location (Rechenzentrum).
    * Entscheide dich f√ºr ein Betriebssystem (ich empfehle hier Ubuntu).
    * W√§hle den kleinsten Server:
    * 2 vCPUs
    * 4 GB RAM

    ![server-setup-1](./srv1.png)
    
    ![server-setup-1](./srv2.png)

    Das reicht vollkommen aus, um loszulegen.

    ---

## 4.2 SSH-Key erstellen:

Um sicher auf deinen Server zugreifen zu k√∂nnen, ben√∂tigst du einen SSH-Schl√ºssel. Falls du noch keinen hast, kannst du ihn wie folgt erstellen:


**SSH-Key erstellen (Windows und Linux)**

√ñffne ein Terminal (bei Windows: PowerShell oder das Windows-Subsystem f√ºr Linux, WSL).
F√ºhre den folgenden Befehl aus
```shell
ssh-keygen -t ed2551
```

Folge den Anweisungen, um den Schl√ºssel zu generieren. 

Der √∂ffentliche Schl√ºssel wird in der Datei `~/.ssh/id_ed25519.pub` (Linux/Mac) oder im entsprechenden Verzeichnis (Windows) gespeichert.

√ñffne die Datei id_ed25519.pub in einem Texteditor und kopiere den Inhalt. F√ºge den Schl√ºssel dann im Hetzner-Dashboard beim Anlegen des Servers ein.

![server-setup-1](./srv4.png)

Best√§tige die Einrichtung, und dein Server wird erstellt. Du kannst ihn jederzeit k√ºndigen, falls du ihn nicht mehr ben√∂tigst.

---

## 4.3 Firewall-Regeln erstellen

Im Hetzner-Dashboard angekommen:

W√§hle deinen Server aus.

Richte eine Firewall ein:
√ñffne die Ports 22, 80 und 443 (jeweils f√ºr TCP).

![server-setup-1](./srv5.png)

Erkl√§rung der Ports:
* Port 22: F√ºr den SSH-Zugriff auf den Server.
* Port 80 und 443: F√ºr HTTP und HTTPS, damit dein Server sp√§ter Webseiten ausliefern kann.

Nach diesen Schritten ist dein Server sicher und bereit f√ºr die n√§chsten Konfigurationen.

---

# 5. Docker und Docker Compose

Du brauchst eine funktionierende Installation von Docker und Docker Compose. 
Keine Sorge, die Installation ist einfach. 

Hier ist der One-Line-Befehl, um Docker auf deinem Server zu installieren:

```shell
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
```

Falls du einen Fehler erh√§lst, k√∂nnte es sein, das curl fehlt, dann instalieren wir es so.

```shell
apt install curl
```

## 5.1 Docker testen

Lass uns mal testen ob Docker ordentlich installiert wurde

```shell
docker run hello-world
```

Der Befehl sollte so oder so √§hnlich dann in der Konsole aussehen.

```shell
test@ubuntu-server:~# docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
c1ec31eb5944: Pull complete
Digest: sha256:5b3cc85e16e3058003c13b7821318369dad01dac3dbb877aac3c28182255c724
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.
```

---

# 6. DNS Setup

Unser Ziel ist es, mittels Docker Compose mit wenig Aufwand Webservices oder Apps bereitzustellen, z. B. unter cloud.2tap2.be oder immich.2tap2.be. Damit die Anfragen korrekt vom Server beantwortet werden und die Domains richtig aufl√∂sen, ben√∂tigen wir einen Reverse Proxy. Hierf√ºr nutzen wir Traefik, den wir sp√§ter installieren werden.

Jetzt ist es zun√§chst wichtig, die DNS-Eintr√§ge richtig zu setzen.
Du k√∂nntest z. B. bei Cloudflare unter den DNS-Einstellungen folgende Eintr√§ge erstellen:

* Einen Eintrag f√ºr cloud, der auf die IP deines Servers zeigt.
* Einen zweiten Eintrag f√ºr immich, der ebenfalls auf deine Server-IP verweist.

Damit kann Traefik die Anfragen verarbeiten und korrekt weiterleiten.

Falls du keine Lust hast, f√ºr jede Subdomain einen neuen DNS-Eintrag zu erstellen, kannst du auch einen Wildcard-Eintrag setzen, z. B. *.homelab, der auf deine Server-IP zeigt. Dadurch kannst du beliebige Subdomains verwenden, wie etwa yopass.homelab.2tap2.be.

---

## 7. N√ºtzliche Tools

Eine gute Entwicklungsumgebung erleichtert die Arbeit enorm. 
Ich empfehle dir eine IDE wie Visual Studio Code oder dessen Open-Source-Variante VSCodium.

[VSCodium](https://vscodium.com/)

[VSCode](https://code.visualstudio.com/)

Beide sind einfach zu bedienen und unterst√ºtzen zahlreiche n√ºtzliche Plugins, die dir die Arbeit erleichtern. Es lohnt sich definitiv, mal 30 Minuten auf YouTube zu investieren, um sich das grundlegende Konzept anzuschauen.

